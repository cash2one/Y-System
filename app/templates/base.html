<!DOCTYPE html>
<html>
<head>
    {% block head %}
    <!-- Standard Meta -->
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge, chrome=1" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0, minimum-scale=1.0, maximum-scale=1.0" />

    <!-- Site Properties -->
    <title>{% block title %}{% endblock %} &middot;{% if current_user.is_authenticated %} {{ current_user.name }} &middot;{% endif %} 云英语</title>
    <meta name="author" content="iROCKBUNNY" />
    <meta name="description" content="Y-System: Y-English Education Service Support System" />
    <meta name="keywords" content="Y-English, Y-System, English, Education" />

    <!-- Semantic UI CSS -->
    <link rel="stylesheet" type="text/css" href="//cdnjs.cloudflare.com/ajax/libs/semantic-ui/{{ Version.SemanticUI }}/semantic.min.css">

    <!-- Font Awesome CSS -->
    <link rel="stylesheet" type="text/css" href="//cdnjs.cloudflare.com/ajax/libs/font-awesome/{{ Version.FontAwesome }}/css/font-awesome.min.css">

    <!-- Customized CSS -->
    {% block customized_styles %}
    <link rel="stylesheet" type="text/css" href="{{ url_for('static', filename='assets/css/customize.css') }}">
    {% endblock %}

    <!-- Favicons -->
    <link rel="apple-touch-icon" href="{{ url_for('static', filename='apple-touch-icon.png') }}">
    <link rel="icon" href="{{ url_for('static', filename='favicon.ico') }}">

    <!-- Google Analytics -->
    <script type="text/javascript">
        (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
        (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
        m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
        })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');

        ga('create', '{{ Analytics.GATrackID }}', 'auto');
        ga('send', 'pageview');
    </script>

    <!-- Piwik -->
    <script type="text/javascript">
        var _paq = _paq || [];
        _paq.push(['trackPageView']);
        _paq.push(['enableLinkTracking']);
        (function() {
            var u="//dev.y-english.org/analytics/";
            _paq.push(['setTrackerUrl', u+'piwik.php']);
            _paq.push(['setSiteId', '{{ Analytics.PiwikSiteID }}']);
            var d=document, g=d.createElement('script'), s=d.getElementsByTagName('script')[0];
            g.type='text/javascript'; g.async=true; g.defer=true; g.src=u+'piwik.js'; s.parentNode.insertBefore(g,s);
        })();
    </script>
    <noscript><p><img src="//dev.y-english.org/analytics/piwik.php?idsite={{ Analytics.PiwikSiteID }}" style="border:0;" alt="" /></p></noscript>
    <!-- End Piwik Code -->
    {% endblock %}
</head>
<body>
    {% block body %}
    <!-- Following Menu -->
    <div class="ui large top fixed borderless hidden menu">
        <div class="ui container">
            <div class="item logo">
                <svg class="ui logo image" version="1.1" viewBox="0 0 512 512"><path d="M65.14,85.95C13.42,144.72-7.42,213.56,2.33,291.3,6.65,325.69,17.47,358,36.12,387.49c0.52,0.82,1.22,1.53,2.21,2.76,0.88-14.91,4.78-28.06,13.45-39.48,15-19.68,35.1-30.34,59.41-33,9.68-1.06,19.5-.93,29.67-1.36a88,88,0,0,1-13.5-23.52c-15.54-39.51-19.7-80.09-9.5-121.47,12-48.75,40.3-85.16,85.8-107,39.69-19.06,80.8-20.14,122.45-6.73,20.61,6.63,39.27,16.76,54.89,32,36.38,35.54,51.18,89.44,37.3,138.35-8.83,31.12-27.5,54.49-57.43,68-16.43,7.39-33.86,9-51.69,8.48-19.17-.56-35.94-7.11-50.93-18.8a54,54,0,0,1-17.65-23.59,95.49,95.49,0,0,1-5.95-26.15c-1.29-14.79-.26-29.27,4.86-43.41,2.26-6.25,6.68-8.5,12.55-9a23.83,23.83,0,0,1,6.29.64c6.76,1.24,13.53,2.32,20.42,1.3,7.48-1.11,13.2-4.55,15.61-12.2a26.46,26.46,0,0,0,.91-14c-2.89-12.85-11.35-20.25-23.7-23.36-11.32-2.85-22.41-.94-33.14,3-19.66,7.18-33.54,21.06-43.46,39a121.14,121.14,0,0,0-14.17,77.57c2.81,19.44,9,37.86,20.75,53.85C226.27,343,260,360,301.42,361.83c31.39,1.41,61.71-4.43,91.25-14.61,30.4-10.48,59-24.55,85-43.63,11.49-8.43,22.06-17.85,30.79-29.22a15,15,0,0,0,3.31-8.93,245.34,245.34,0,0,0-3.7-54.1c-10.51-57.5-37-106.47-80.69-145.32C365.78,11.2,293.52-9.44,212.31,4,153.78,13.61,104.32,41.42,65.14,85.95Z" fill="#1B1C1D"/><path d="M505.48,310.21A206.92,206.92,0,0,1,475.81,335a373,373,0,0,1-96.61,47.72c-27,8.81-54.66,13.5-83.21,12.92a182.54,182.54,0,0,1-89-24.74c-8.05-4.65-16-9.47-24.13-14-18.22-10.14-37.59-15.34-58.64-13.74-22.56,1.72-40.15,12-52.53,30.68-12,18-13.89,37-2.54,56.26a36.43,36.43,0,0,0,13.09,13,21.21,21.21,0,0,0,28.46-6.74c3.18-5,2.26-7.76-3.27-9.59-2-.66-4.08-1.16-6.12-1.71-5.69-1.54-9.23-5.39-11.12-10.76-2.93-8.31-2.53-16.56,2.23-24,7.24-11.31,17.26-19,30.77-21.49a59.27,59.27,0,0,1,31.31,2.87c30.95,11.23,39,39.78,34.85,60.69-3.33,17-13.59,29.41-28.51,37.9-10.74,6.11-22.43,7.54-34.58,6,70.7,42.74,164.46,49.44,246.88,7.61C455.16,442.23,496.65,362.71,505.48,310.21Z" fill="#1B1C1D"/></svg>
                <span>云英语</span>
            </div>
            {% if current_user.is_authenticated %}
            {% if current_user.can('管理') %}<a class="item loading-trigger" href="{{ url_for('manage.summary') }}"><i class="dashboard icon"></i>系统实况</a>{% else %}
            <a class="item loading-trigger" href="{{ url_for('main.profile', id=current_user.id) }}"><i class="archive icon"></i>研修档案</a>
            {% endif %}
            {% else %}
            <a class="item loading-trigger" href="{{ url_for('main.index') }}"><i class="home icon"></i>首页</a>
            <a class="item" href="{{ url_for('main.index') }}#products"><i class="lightbulb icon"></i>解决方案</a>
            {% endif %}
            {% if current_user.is_authenticated and current_user.can('预约') and not current_user.can('管理') %}
            <div class="ui dropdown item">
                <i class="calendar icon"></i>
                课程预约
                <i class="dropdown icon"></i>
                <div class="menu">
                    {% if current_user.can('预约VB课程') %}<a class="item loading-trigger" href="{{ url_for('book.vb') }}"><i class="add to calendar icon"></i>预约VB课程</a>{% endif %}
                    {% if current_user.can('预约Y-GRE课程') %}<a class="item loading-trigger" href="{{ url_for('book.y_gre') }}"><i class="add to calendar icon"></i>预约Y-GRE课程</a>{% endif %}
                </div>
            </div>
            {% endif %}
            {% if current_user.is_authenticated and current_user.can('管理') %}
            <div class="ui dropdown item">
                <i class="student icon"></i>教学管理<i class="dropdown icon"></i>
                <div class="menu">
                    {% if current_user.can('管理iPad借阅') %}<a class="item loading-trigger" href="{{ url_for('manage.rental') }}"><i class="retweet icon"></i>iPad借阅管理</a>{% endif %}
                    {% if current_user.can('管理课程预约') %}<a class="item loading-trigger" href="{{ url_for('manage.booking') }}"><i class="calendar icon"></i>预约管理</a>{% endif %}
                    {% if current_user.can('管理预约时段') %}<a class="item loading-trigger" href="{{ url_for('manage.schedule') }}"><i class="clock icon"></i>预约时段管理</a>{% endif %}
                    {% if current_user.can('管理课程') %}<a class="item loading-trigger" href="{{ url_for('manage.lesson') }}"><i class="book icon"></i>课程管理</a>{% endif %}
                    {% if current_user.can('管理作业') %}<a class="item loading-trigger" href="{{ url_for('manage.assignment') }}"><i class="file text outline icon"></i>作业管理</a>{% endif %}
                    {% if current_user.can('管理考试') %}<a class="item loading-trigger" href="{{ url_for('manage.test') }}"><i class="pencil icon"></i>考试管理</a>{% endif %}
                </div>
            </div>
            <div class="ui dropdown item">
                <i class="settings icon"></i>系统管理<i class="dropdown icon"></i>
                <div class="menu">
                    <a class="item loading-trigger" href="{{ url_for('manage.user') }}"><i class="user icon"></i>用户管理</a>
                    {% if current_user.can('管理团报') %}<a class="item loading-trigger" href="{{ url_for('manage.group') }}"><i class="users icon"></i>团报管理</a>{% endif %}
                    {% if current_user.can('管理班级') %}<a class="item loading-trigger" href="{{ url_for('manage.course') }}"><i class="student icon"></i>班级管理</a>{% endif %}
                    <a class="item loading-trigger" href="{{ url_for('manage.ipad') }}"><i class="tablet icon"></i>iPad管理</a>
                    {% if current_user.can('管理通知') %}<a class="item loading-trigger" href="{{ url_for('manage.announcement') }}"><i class="announcement icon"></i>通知管理</a>{% endif %}
                    {% if current_user.can('管理产品') %}<a class="item loading-trigger" href="{{ url_for('manage.product') }}"><i class="tags icon"></i>产品管理</a>{% endif %}
                    {% if current_user.is_developer%}
                    <div class="divider"></div>
                    <div class="header">开发人员</div>
                    <a class="item loading-trigger" href="{{ url_for('manage.role') }}"><i class="spy icon"></i>角色管理</a>
                    <a class="item loading-trigger" href="{{ url_for('manage.permission') }}"><i class="checkmark box icon"></i>权限管理</a>
                    {% endif %}
                </div>
            </div>
            <div class="ui dropdown item">
                <i class="search icon"></i>综合查询<i class="dropdown icon"></i>
                <div class="menu">
                    <a class="item loading-trigger" href="{{ url_for('manage.ipad_contents') }}"><i class="table icon"></i>iPad内容排布表</a>
                    <a class="item loading-trigger" href="{{ url_for('manage.analytics') }}"><i class="line chart icon"></i>访客分析</a>
                </div>
            </div>
            {% endif %}
            {% block following_menu %}
            {% endblock %}
            {% block following_menu_auth %}
            <div class="right menu">
                {% if current_user.is_authenticated %}
                <a class="item menu-popup-trigger loading-trigger" data-content="无未读消息" data-position="bottom center" data-variation="inverted"><i class="fa fa-envelope"></i><div class="ui less-relaxed blue empty circular label"></div></a>
                <div class="ui dropdown item menu-popup-trigger" data-content="研修档案与设置" data-position="bottom center" data-variation="inverted">
                    {{ current_user.avatar(size=20, default='404') | safe }}
                    <i class="less-relaxed dropdown icon"></i>
                    <div class="menu">
                        {% if current_user.is_developer %}
                        <div class="header" style="text-transform: none;">{{ Version.Application }}</div>
                        <div class="divider"></div>
                        {% endif %}
                        <div class="header">{% if current_user.can('管理') %}{{ current_user.name }} [{{ current_user.role.name }}]{% else %}{{ current_user.name }}{% endif %}</div>
                        <a class="item loading-trigger" href="{{ url_for('main.profile', id=current_user.id) }}"><i class="archive icon"></i>研修档案</a>
                        {% if current_user.can('预约') and current_user.can('管理') %}
                        <div class="divider"></div>
                        <div class="header">课程预约</div>
                        {% if current_user.can('预约VB课程') %}<a class="item loading-trigger" href="{{ url_for('book.vb') }}"><i class="add to calendar icon"></i>预约VB课程</a>{% endif %}
                        {% if current_user.can('预约Y-GRE课程') %}<a class="item loading-trigger" href="{{ url_for('book.y_gre') }}"><i class="add to calendar icon"></i>预约Y-GRE课程</a>{% endif %}
                        {% endif %}
                        <div class="divider"></div>
                        <div class="header">账户设置</div>
                        <a class="item loading-trigger" href="{{ url_for('auth.change_email_request') }}"><i class="at icon"></i>修改邮箱</a>
                        <a class="item loading-trigger" href="{{ url_for('auth.change_password') }}"><i class="lock icon"></i>修改密码</a>
                        <div class="divider"></div>
                        <a class="item loading-trigger" href="{{ url_for('auth.logout') }}"><i class="sign out icon"></i>退出</a>
                    </div>
                </div>
                {% else %}
                <a class="item loading-trigger" href="{{ url_for('auth.login') }}"><i class="sign in icon"></i>登录</a>
                {% endif %}
            </div>
            {% endblock %}
        </div>
    </div>

    <!-- Sidebar Menu -->
    <div class="ui vertical inverted sidebar menu">
        <div class="item">
            <h2 class="ui center aligned inverted header">
                <svg class="ui logo image" version="1.1" viewBox="0 0 512 512"><path d="M65.14,85.95C13.42,144.72-7.42,213.56,2.33,291.3,6.65,325.69,17.47,358,36.12,387.49c0.52,0.82,1.22,1.53,2.21,2.76,0.88-14.91,4.78-28.06,13.45-39.48,15-19.68,35.1-30.34,59.41-33,9.68-1.06,19.5-.93,29.67-1.36a88,88,0,0,1-13.5-23.52c-15.54-39.51-19.7-80.09-9.5-121.47,12-48.75,40.3-85.16,85.8-107,39.69-19.06,80.8-20.14,122.45-6.73,20.61,6.63,39.27,16.76,54.89,32,36.38,35.54,51.18,89.44,37.3,138.35-8.83,31.12-27.5,54.49-57.43,68-16.43,7.39-33.86,9-51.69,8.48-19.17-.56-35.94-7.11-50.93-18.8a54,54,0,0,1-17.65-23.59,95.49,95.49,0,0,1-5.95-26.15c-1.29-14.79-.26-29.27,4.86-43.41,2.26-6.25,6.68-8.5,12.55-9a23.83,23.83,0,0,1,6.29.64c6.76,1.24,13.53,2.32,20.42,1.3,7.48-1.11,13.2-4.55,15.61-12.2a26.46,26.46,0,0,0,.91-14c-2.89-12.85-11.35-20.25-23.7-23.36-11.32-2.85-22.41-.94-33.14,3-19.66,7.18-33.54,21.06-43.46,39a121.14,121.14,0,0,0-14.17,77.57c2.81,19.44,9,37.86,20.75,53.85C226.27,343,260,360,301.42,361.83c31.39,1.41,61.71-4.43,91.25-14.61,30.4-10.48,59-24.55,85-43.63,11.49-8.43,22.06-17.85,30.79-29.22a15,15,0,0,0,3.31-8.93,245.34,245.34,0,0,0-3.7-54.1c-10.51-57.5-37-106.47-80.69-145.32C365.78,11.2,293.52-9.44,212.31,4,153.78,13.61,104.32,41.42,65.14,85.95Z" fill="#FFF"/><path d="M505.48,310.21A206.92,206.92,0,0,1,475.81,335a373,373,0,0,1-96.61,47.72c-27,8.81-54.66,13.5-83.21,12.92a182.54,182.54,0,0,1-89-24.74c-8.05-4.65-16-9.47-24.13-14-18.22-10.14-37.59-15.34-58.64-13.74-22.56,1.72-40.15,12-52.53,30.68-12,18-13.89,37-2.54,56.26a36.43,36.43,0,0,0,13.09,13,21.21,21.21,0,0,0,28.46-6.74c3.18-5,2.26-7.76-3.27-9.59-2-.66-4.08-1.16-6.12-1.71-5.69-1.54-9.23-5.39-11.12-10.76-2.93-8.31-2.53-16.56,2.23-24,7.24-11.31,17.26-19,30.77-21.49a59.27,59.27,0,0,1,31.31,2.87c30.95,11.23,39,39.78,34.85,60.69-3.33,17-13.59,29.41-28.51,37.9-10.74,6.11-22.43,7.54-34.58,6,70.7,42.74,164.46,49.44,246.88,7.61C455.16,442.23,496.65,362.71,505.48,310.21Z" fill="#FFF"/></svg>
                <div class="content">云英语</div>
            </h2>
        </div>
        {% if current_user.is_authenticated %}
        {% if current_user.is_developer %}<div class="disabled item">{{ Version.Application }}</div>{% endif %}
        <a class="item loading-trigger" href="{{ url_for('main.profile', id=current_user.id) }}"><i class="user icon"></i>{% if current_user.can('管理') %}{{ current_user.name }} [{{ current_user.role.name }}]{% else %}{{ current_user.name }}{% endif %}</a>
        <a class="item loading-trigger" href="#"><i class="mail icon"></i>无未读消息</a>
        {% if current_user.can('管理') %}<a class="item loading-trigger" href="{{ url_for('manage.summary') }}"><i class="dashboard icon"></i>系统实况</a>{% endif %}
        {% else %}
        <a class="item loading-trigger" href="{{ url_for('main.index') }}"><i class="home icon"></i>首页</a>
        <a class="item" href="{{ url_for('main.index') }}#products"><i class="lightbulb icon"></i>解决方案</a>
        {% endif %}
        {% if current_user.is_authenticated and current_user.can('预约') and not current_user.can('管理') %}
        <div class="item">
            <div class="header">课程预约</div>
            <div class="menu">
                {% if current_user.can('预约VB课程') %}<a class="item loading-trigger" href="{{ url_for('book.vb') }}"><i class="add to calendar icon"></i>预约VB课程</a>{% endif %}
                {% if current_user.can('预约Y-GRE课程') %}<a class="item loading-trigger" href="{{ url_for('book.y_gre') }}"><i class="add to calendar icon"></i>预约Y-GRE课程</a>{% endif %}
            </div>
        </div>
        {% endif %}
        {% if current_user.is_authenticated and current_user.can('管理') %}
        <div class="item">
            <div class="header">教学管理</div>
            <div class="menu">
                {% if current_user.can('管理iPad借阅') %}<a class="item loading-trigger" href="{{ url_for('manage.rental') }}"><i class="retweet icon"></i>iPad借阅管理</a>{% endif %}
                {% if current_user.can('管理课程预约') %}<a class="item loading-trigger" href="{{ url_for('manage.booking') }}"><i class="calendar icon"></i>预约管理</a>{% endif %}
                {% if current_user.can('管理预约时段') %}<a class="item loading-trigger" href="{{ url_for('manage.schedule') }}"><i class="clock icon"></i>预约时段管理</a>{% endif %}
                {% if current_user.can('管理课程') %}<a class="item loading-trigger" href="{{ url_for('manage.lesson') }}"><i class="book icon"></i>课程管理</a>{% endif %}
                {% if current_user.can('管理作业') %}<a class="item loading-trigger" href="{{ url_for('manage.assignment') }}"><i class="file text icon"></i>作业管理</a>{% endif %}
                {% if current_user.can('管理考试') %}<a class="item loading-trigger" href="{{ url_for('manage.test') }}"><i class="pencil icon"></i>考试管理</a>{% endif %}
            </div>
        </div>
        <div class="item">
            <div class="header">系统管理</div>
            <div class="menu">
                <a class="item loading-trigger" href="{{ url_for('manage.user') }}"><i class="user icon"></i>用户管理</a>
                {% if current_user.can('管理团报') %}<a class="item loading-trigger" href="{{ url_for('manage.group') }}"><i class="users icon"></i>团报管理</a>{% endif %}
                {% if current_user.can('管理班级') %}<a class="item loading-trigger" href="{{ url_for('manage.course') }}"><i class="student icon"></i>班级管理</a>{% endif %}
                <a class="item loading-trigger" href="{{ url_for('manage.ipad') }}"><i class="tablet icon"></i>iPad管理</a>
                {% if current_user.can('管理通知') %}<a class="item loading-trigger" href="{{ url_for('manage.announcement') }}"><i class="announcement icon"></i>通知管理</a>{% endif %}
                {% if current_user.can('管理产品') %}<a class="item loading-trigger" href="{{ url_for('manage.product') }}"><i class="tags icon"></i>产品管理</a>{% endif %}
            </div>
        </div>
        {% if current_user.is_developer%}
        <div class="item">
            <div class="header">开发人员</div>
            <div class="menu">
                <a class="item loading-trigger" href="{{ url_for('manage.role') }}"><i class="spy icon"></i>角色管理</a>
                <a class="item loading-trigger" href="{{ url_for('manage.permission') }}"><i class="checkmark box icon"></i>权限管理</a>
            </div>
        </div>
        {% endif %}
        <div class="item">
            <div class="header">综合查询</div>
            <div class="menu">
                <a class="item loading-trigger" href="{{ url_for('manage.ipad_contents') }}"><i class="table icon"></i>iPad内容排布表</a>
                <a class="item loading-trigger" href="{{ url_for('manage.analytics') }}"><i class="line chart icon"></i>访客分析</a>
            </div>
        </div>
        {% endif %}
        {% block sidebar_menu %}
        {% endblock %}
        {% block sidebar_menu_auth %}
        {% if current_user.is_authenticated %}
        {% if current_user.can('预约') and current_user.can('管理') %}
        <div class="item">
            <div class="header">课程预约</div>
            <div class="menu">
                {% if current_user.can('预约VB课程') %}<a class="item loading-trigger" href="{{ url_for('book.vb') }}"><i class="add to calendar icon"></i>预约VB课程</a>{% endif %}
                {% if current_user.can('预约Y-GRE课程') %}<a class="item loading-trigger" href="{{ url_for('book.y_gre') }}"><i class="add to calendar icon"></i>预约Y-GRE课程</a>{% endif %}
            </div>
        </div>
        {% endif %}
        <div class="item">
            <div class="header">账户设置</div>
            <div class="menu">
                <a class="item loading-trigger" href="{{ url_for('auth.change_email_request') }}"><i class="at icon"></i>修改邮箱</a>
                <a class="item loading-trigger" href="{{ url_for('auth.change_password') }}"><i class="lock icon"></i>修改密码</a>
            </div>
        </div>
        <a class="item loading-trigger" href="{{ url_for('auth.logout') }}"><i class="sign out icon"></i>退出</a>
        {% else %}
        <a class="item loading-trigger" href="{{ url_for('auth.login') }}"><i class="sign in icon"></i>登录</a>
        {% endif %}
        {% endblock %}
    </div>

    <!-- Page Contents -->
    <div class="pusher">
        <div class="ui inverted vertical masthead center aligned segment zoomed">
            <div class="ui container">
                <div class="ui large borderless inverted menu">
                    <a class="toc item"><i class="sidebar icon"></i></a>
                    <div class="item logo">
                        <svg class="ui logo image" version="1.1" viewBox="0 0 512 512"><path d="M65.14,85.95C13.42,144.72-7.42,213.56,2.33,291.3,6.65,325.69,17.47,358,36.12,387.49c0.52,0.82,1.22,1.53,2.21,2.76,0.88-14.91,4.78-28.06,13.45-39.48,15-19.68,35.1-30.34,59.41-33,9.68-1.06,19.5-.93,29.67-1.36a88,88,0,0,1-13.5-23.52c-15.54-39.51-19.7-80.09-9.5-121.47,12-48.75,40.3-85.16,85.8-107,39.69-19.06,80.8-20.14,122.45-6.73,20.61,6.63,39.27,16.76,54.89,32,36.38,35.54,51.18,89.44,37.3,138.35-8.83,31.12-27.5,54.49-57.43,68-16.43,7.39-33.86,9-51.69,8.48-19.17-.56-35.94-7.11-50.93-18.8a54,54,0,0,1-17.65-23.59,95.49,95.49,0,0,1-5.95-26.15c-1.29-14.79-.26-29.27,4.86-43.41,2.26-6.25,6.68-8.5,12.55-9a23.83,23.83,0,0,1,6.29.64c6.76,1.24,13.53,2.32,20.42,1.3,7.48-1.11,13.2-4.55,15.61-12.2a26.46,26.46,0,0,0,.91-14c-2.89-12.85-11.35-20.25-23.7-23.36-11.32-2.85-22.41-.94-33.14,3-19.66,7.18-33.54,21.06-43.46,39a121.14,121.14,0,0,0-14.17,77.57c2.81,19.44,9,37.86,20.75,53.85C226.27,343,260,360,301.42,361.83c31.39,1.41,61.71-4.43,91.25-14.61,30.4-10.48,59-24.55,85-43.63,11.49-8.43,22.06-17.85,30.79-29.22a15,15,0,0,0,3.31-8.93,245.34,245.34,0,0,0-3.7-54.1c-10.51-57.5-37-106.47-80.69-145.32C365.78,11.2,293.52-9.44,212.31,4,153.78,13.61,104.32,41.42,65.14,85.95Z" fill="#FFF"/><path d="M505.48,310.21A206.92,206.92,0,0,1,475.81,335a373,373,0,0,1-96.61,47.72c-27,8.81-54.66,13.5-83.21,12.92a182.54,182.54,0,0,1-89-24.74c-8.05-4.65-16-9.47-24.13-14-18.22-10.14-37.59-15.34-58.64-13.74-22.56,1.72-40.15,12-52.53,30.68-12,18-13.89,37-2.54,56.26a36.43,36.43,0,0,0,13.09,13,21.21,21.21,0,0,0,28.46-6.74c3.18-5,2.26-7.76-3.27-9.59-2-.66-4.08-1.16-6.12-1.71-5.69-1.54-9.23-5.39-11.12-10.76-2.93-8.31-2.53-16.56,2.23-24,7.24-11.31,17.26-19,30.77-21.49a59.27,59.27,0,0,1,31.31,2.87c30.95,11.23,39,39.78,34.85,60.69-3.33,17-13.59,29.41-28.51,37.9-10.74,6.11-22.43,7.54-34.58,6,70.7,42.74,164.46,49.44,246.88,7.61C455.16,442.23,496.65,362.71,505.48,310.21Z" fill="#FFF"/></svg>
                        <span>云英语</span>
                    </div>
                    {% if current_user.is_authenticated %}
                    {% if current_user.can('管理') %}
                    <a class="item loading-trigger" href="{{ url_for('manage.summary') }}"><i class="dashboard icon"></i>系统实况</a>
                    {% else %}
                    <a class="item loading-trigger" href="{{ url_for('main.profile', id=current_user.id) }}"><i class="archive icon"></i>研修档案</a>
                    {% endif %}
                    {% else %}
                    <a class="item loading-trigger" href="{{ url_for('main.index') }}"><i class="home icon"></i>首页</a>
                    <a class="item" href="{{ url_for('main.index') }}#products"><i class="lightbulb icon"></i>解决方案</a>
                    {% endif %}
                    {% if current_user.is_authenticated and current_user.can('预约') and not current_user.can('管理') %}
                    <div class="ui dropdown item">
                        <i class="calendar icon"></i>课程预约<i class="dropdown icon"></i>
                        <div class="menu">
                            {% if current_user.can('预约VB课程') %}<a class="item loading-trigger" href="{{ url_for('book.vb') }}"><i class="add to calendar icon"></i>预约VB课程</a>{% endif %}
                            {% if current_user.can('预约Y-GRE课程') %}<a class="item loading-trigger" href="{{ url_for('book.y_gre') }}"><i class="add to calendar icon"></i>预约Y-GRE课程</a>{% endif %}
                        </div>
                    </div>
                    {% endif %}
                    {% if current_user.is_authenticated and current_user.can('管理') %}
                    <div class="ui dropdown item">
                        <i class="student icon"></i>教学管理<i class="dropdown icon"></i>
                        <div class="menu">
                            {% if current_user.can('管理iPad借阅') %}<a class="item loading-trigger" href="{{ url_for('manage.rental') }}"><i class="retweet icon"></i>iPad借阅管理</a>{% endif %}
                            {% if current_user.can('管理课程预约') %}<a class="item loading-trigger" href="{{ url_for('manage.booking') }}"><i class="calendar icon"></i>预约管理</a>{% endif %}
                            {% if current_user.can('管理预约时段') %}<a class="item loading-trigger" href="{{ url_for('manage.schedule') }}"><i class="clock icon"></i>预约时段管理</a>{% endif %}
                            {% if current_user.can('管理课程') %}<a class="item loading-trigger" href="{{ url_for('manage.lesson') }}"><i class="book icon"></i>课程管理</a>{% endif %}
                            {% if current_user.can('管理作业') %}<a class="item loading-trigger" href="{{ url_for('manage.assignment') }}"><i class="file text outline icon"></i>作业管理</a>{% endif %}
                            {% if current_user.can('管理考试') %}<a class="item loading-trigger" href="{{ url_for('manage.test') }}"><i class="pencil icon"></i>考试管理</a>{% endif %}
                        </div>
                    </div>
                    <div class="ui dropdown item">
                        <i class="settings icon"></i>系统管理<i class="dropdown icon"></i>
                        <div class="menu">
                            <a class="item loading-trigger" href="{{ url_for('manage.user') }}"><i class="user icon"></i>用户管理</a>
                            {% if current_user.can('管理团报') %}<a class="item loading-trigger" href="{{ url_for('manage.group') }}"><i class="users icon"></i>团报管理</a>{% endif %}
                            {% if current_user.can('管理班级') %}<a class="item loading-trigger" href="{{ url_for('manage.course') }}"><i class="student icon"></i>班级管理</a>{% endif %}
                            <a class="item loading-trigger" href="{{ url_for('manage.ipad') }}"><i class="tablet icon"></i>iPad管理</a>
                            {% if current_user.can('管理通知') %}<a class="item loading-trigger" href="{{ url_for('manage.announcement') }}"><i class="announcement icon"></i>通知管理</a>{% endif %}
                            {% if current_user.can('管理产品') %}<a class="item loading-trigger" href="{{ url_for('manage.product') }}"><i class="tags icon"></i>产品管理</a>{% endif %}
                            {% if current_user.is_developer%}
                            <div class="divider"></div>
                            <div class="header">开发人员</div>
                            <a class="item loading-trigger" href="{{ url_for('manage.role') }}"><i class="spy icon"></i>角色管理</a>
                            <a class="item loading-trigger" href="{{ url_for('manage.permission') }}"><i class="checkmark box icon"></i>权限管理</a>
                            {% endif %}
                        </div>
                    </div>
                    <div class="ui dropdown item">
                        <i class="search icon"></i>综合查询<i class="dropdown icon"></i>
                        <div class="menu">
                            <a class="item loading-trigger" href="{{ url_for('manage.ipad_contents') }}"><i class="table icon"></i>iPad内容排布表</a>
                            <a class="item loading-trigger" href="{{ url_for('manage.analytics') }}"><i class="line chart icon"></i>访客分析</a>
                        </div>
                    </div>
                    {% endif %}
                    {% block menu %}
                    {% endblock %}
                    {% block menu_auth %}
                    <div class="right menu">
                        {% if current_user.is_authenticated %}
                        <a class="item menu-popup-trigger loading-trigger" data-content="无未读消息" data-position="bottom center" data-variation="inverted"><i class="fa fa-envelope"></i><div class="ui less-relaxed yellow empty circular label"></div></a>
                        <div class="ui dropdown item menu-popup-trigger" data-content="研修档案与设置" data-position="bottom center" data-variation="inverted">
                            {{ current_user.avatar(size=20, default='404') | safe }}
                            <i class="less-relaxed dropdown icon"></i>
                            <div class="menu">
                                {% if current_user.is_developer %}
                                <div class="header" style="text-transform: none;">{{ Version.Application }}</div>
                                <div class="divider"></div>
                                {% endif %}
                                <div class="header">{% if current_user.can('管理') %}{{ current_user.name }} [{{ current_user.role.name }}]{% else %}{{ current_user.name }}{% endif %}</div>
                                <a class="item loading-trigger" href="{{ url_for('main.profile', id=current_user.id) }}"><i class="archive icon"></i>研修档案</a>
                                {% if current_user.can('预约') and current_user.can('管理') %}
                                <div class="divider"></div>
                                <div class="header">课程预约</div>
                                {% if current_user.can('预约VB课程') %}<a class="item loading-trigger" href="{{ url_for('book.vb') }}"><i class="add to calendar icon"></i>预约VB课程</a>{% endif %}
                                {% if current_user.can('预约Y-GRE课程') %}<a class="item loading-trigger" href="{{ url_for('book.y_gre') }}"><i class="add to calendar icon"></i>预约Y-GRE课程</a>{% endif %}
                                {% endif %}
                                <div class="divider"></div>
                                <div class="header">账户设置</div>
                                <a class="item loading-trigger" href="{{ url_for('auth.change_email_request') }}"><i class="at icon"></i>修改邮箱</a>
                                <a class="item loading-trigger" href="{{ url_for('auth.change_password') }}"><i class="lock icon"></i>修改密码</a>
                                <div class="divider"></div>
                                <a class="item loading-trigger" href="{{ url_for('auth.logout') }}"><i class="sign out icon"></i>退出</a>
                            </div>
                        </div>
                        {% else %}
                        <a class="item loading-trigger" href="{{ url_for('auth.login') }}"><i class="sign in icon"></i>登录</a>
                        {% endif %}
                    </div>
                    {% endblock %}
                </div>
            </div>
            {% block page_masthead %}
            {% endblock %}
        </div>

        {% block page_content %}
        {% endblock %}

        <div class="ui inverted vertical footer segment">
            <div class="ui container">
                <div class="ui stackable inverted divided equal height stackable grid">
                    <div class="three wide column">
                        <h4 class="ui inverted header">技术支持</h4>
                        <div class="ui inverted link list">
                            <a class="item" href="http://flask.pocoo.org/" target="_blank">Flask</a>
                            <a class="item" href="http://semantic-ui.com/" target="_blank">Semantic UI</a>
                        </div>
                    </div>
                    <div class="three wide column">
                        <h4 class="ui inverted header">关于我们</h4>
                        <div class="ui inverted link list">
                            <a id="contacts-footer-link" class="item"><i class="fa fa-phone fa-fw"></i> 400-876-3898</a>
                            <div id="contacts-dimmer" class="ui page dimmer">
                                <div class="content">
                                    <div class="ui center list">
                                        <div class="item"><i class="fa fa-phone fa-fw"></i> 400-876-3898</div>
                                        <div class="item">
                                            <i class="fa fa-send fa-fw"></i>
                                            <a href="mailto:service@y-english.org?subject=Mail From Y-System Website">service@y-english.org</a>
                                        </div>
                                        <div class="item">
                                            <i class="fa fa-map-marker fa-fw"></i>
                                            <a href="http://j.map.baidu.com/ukltC" target="_blank">北京 &middot; 海淀 &middot; 五道口 &middot; 华清商务会馆1707室</a>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            <a id="wechat-qr-code-click" class="item"><i class="fa fa-wechat fa-fw"></i> 微信公众号</a>
                            <div id="wechat-qr-code" class="ui popup top left transition hidden">
                                <img class="ui medium image" src="{{ url_for('static', filename='images/qrcode/wechat.jpg') }}" alt="Wechat QR Code">
                            </div>
                        </div>
                    </div>
                    <div class="seven wide column">
                        <h4 class="ui inverted header">云英语教育服务支撑系统 &middot; Y-System</h4>
                        <div class="ui inverted link list">
                            <div id="copyright" class="item"></div>
                            <a class="item" href="http://www.miitbeian.gov.cn/" target="_blank"><i class="fa fa-shield fa-fw"></i> 京ICP备11017771号</a>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <div id="loading-dimmer" class="ui page dimmer">
        <div class="ui massive loader"></div>
    </div>
    {% endblock %}

    {% block scripts %}
    <!-- jQuery -->
    <script type="text/javascript" src="//cdnjs.cloudflare.com/ajax/libs/jquery/{{ Version.jQuery }}/jquery.min.js"></script>

    <!-- Semantic UI JS -->
    <script type="text/javascript" src="//cdnjs.cloudflare.com/ajax/libs/semantic-ui/{{ Version.SemanticUI }}/semantic.min.js"></script>

    <!-- Moment.js -->
    {{ moment.include_moment(version=Version.MomentJS) }}
    {{ moment.locale('zh-CN') }}

    <!-- Customized JS -->
    {% block customized_scripts %}
    <script type="text/javascript" src="{{ url_for('static', filename='assets/js/customize.js') }}"></script>
    {% endblock %}

    {% endblock %}
</body>
</html>